<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Planificateur de trajet - Airlink & Stepford Express</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      padding: 20px;
    }
    select, button {
      font-size: 16px;
      padding: 10px;
      margin: 10px 0;
    }
    .route {
      margin: 20px 0;
      padding: 10px;
      border-left: 5px solid black;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .station {
      font-size: 16px;
    }
    .intermediate {
      font-size: 14px;
      font-style: italic;
      color: #777;
    }
    .highlight {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Planificateur de trajet - Airlink & Stepford Express</h1>
  <label for="from">Départ :</label>
  <select id="from">
    <option disabled selected>Sélectionnez une gare</option>
  </select>
  <br>
  <label for="to">Arrivée :</label>
  <select id="to">
    <option disabled selected>Sélectionnez une gare</option>
  </select>
  <br>
  <button onclick="planRoute()">Planifier le trajet</button>

  <div id="results"></div>

  <script>
    const operators = {
      "Stepford Express": {
        color: "#c63cb6",
        lines: [
          ["Stepford Central", "St Helens Bridge", "Benton", "Leighton Stepford Road", "Leighton City", "Edgemead", "Westercoast", "Westwyvern", "Northshore", "Llyn-by-the-Sea"],
          ["Stepford Central", "St Helens Bridge", "Elsemere Junction", "Morganstown", "Leighton Stepford Road", "Leighton City", "Edgemead", "Westercoast", "Westwyvern", "Northshore", "Llyn-by-the-Sea"],
          ["Llyn-by-the-Sea", "Northshore", "Westwyvern", "Edgemead", "Rayleigh Bay"],
          ["Leighton City", "Leighton Stepford Road", "Benton", "Eden Quay", "Newry"],
          ["Llyn-by-the-Sea", "Westwyvern", "Leighton City", "Leighton Stepford Road", "Benton", "Newry", "Newry Harbour"],
          ["Llyn-by-the-Sea", "Northshore", "Westercoast", "Leighton City", "Leighton Stepford Road", "Morganstown", "Benton", "Newry"]
        ]
      },
      "Airlink": {
        color: "#FFA500",
        lines: [
          ["Stepford Central", "Airport Central"],
          ["Stepford Central", "Airport Central", "Terminal 1", "Terminal 2"],
          ["Stepford Central", "Stepford East", "Elsemere Junction", "Morganstown", "Airport Central", "Terminal 1", "Terminal 2"],
          ["Stepford Central", "St Helens Bridge", "Berrily", "Stepford Airport Parkway", "Airport Central"],
          ["Stepford Central", "Stepford East", "Stepford Airport Parkway", "Airport Central"],
          ["Airport Central", "Stepford Airport Parkway", "Leighton Stepford Road"],
          ["Terminal 3", "Terminal 2", "Airport Central", "Water Newton", "Leighton Stepford Road"],
          ["Stepford Central", "St Helens Bridge", "Morganstown", "Airport Central", "Terminal 1", "Terminal 3"],
          ["Stepford Central", "St Helens Bridge", "Elsemere Junction", "Stepford Airport Parkway", "Airport Central", "Terminal 2"]
        ]
      }
    };

    const allStations = [...new Set(Object.values(operators).flatMap(op => op.lines.flat()))].sort();
    const fromSelect = document.getElementById("from");
    const toSelect = document.getElementById("to");

    allStations.forEach(station => {
      const opt1 = document.createElement("option");
      opt1.value = opt1.textContent = station;
      fromSelect.appendChild(opt1);

      const opt2 = document.createElement("option");
      opt2.value = opt2.textContent = station;
      toSelect.appendChild(opt2);
    });

    function planRoute() {
      const from = fromSelect.value;
      const to = toSelect.value;
      if (!from || !to || from === to) return;

      let results = [];

      for (const [operatorName, operator] of Object.entries(operators)) {
        for (const line of operator.lines) {
          const fromIndex = line.indexOf(from);
          const toIndex = line.indexOf(to);

          if (fromIndex !== -1 && toIndex !== -1 && fromIndex < toIndex) {
            results.push({
              operator: operatorName,
              color: operator.color,
              path: line.slice(fromIndex, toIndex + 1),
              intermediate: line.slice(fromIndex + 1, toIndex)
            });
          }
        }
      }

      results = results.sort((a, b) => a.path.length - b.path.length).slice(0, 3);

      const container = document.getElementById("results");
      container.innerHTML = "";

      if (results.length === 0) {
        container.innerHTML = `<p>Aucune liaison directe trouvée entre <strong>${from}</strong> et <strong>${to}</strong>.</p>`;
        return;
      }

      for (const route of results) {
        const div = document.createElement("div");
        div.className = "route";
        div.style.borderColor = route.color;

        div.innerHTML = `<p><strong style="color:${route.color}">${route.operator}</strong></p>` +
          `<p class="station"><span class="highlight">${route.path[0]}</span></p>` +
          route.intermediate.map(st => `<p class="station intermediate">${st}</p>`).join("") +
          `<p class="station highlight">${route.path.at(-1)}</p>`;

        container.appendChild(div);
      }
    }
  </script>
</body>
</html>
